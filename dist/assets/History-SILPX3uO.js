import{_ as I,a as y,o as B,p as $,c as g,i as l,f as r,j as f,g as e,t as o,F as b,l as k,z as w,b as V,w as L,U as T}from"./index-BT3itL6u.js";const z={class:"recharge-history"},N={key:0},O={key:0},j={key:1,style:{"text-align":"center",padding:"2rem",color:"#777"}},R={key:2,class:"pagination"},q=["disabled"],A=["onClick"],F=["disabled"],D=10,U={__name:"RechargeHistory",setup(M){const u=y([]),n=y(1),c=y([]),m=async()=>{const t=localStorage.getItem("lang")||"ko";try{const s=await $.get(`/platforms?lang=${t}`);c.value=s.data}catch(s){console.error("플랫폼 목록 불러오기 실패:",s)}},P=t=>{const s=c.value.find(a=>a.id===t);return s?s.name:t};B(async()=>{await m();const t=localStorage.getItem("user_token");try{const s=await $.get("/users/me/transactions",{headers:{Authorization:`Bearer ${t}`}});u.value=s.data.transactions||[]}catch(s){console.error("충전 이력 불러오기 실패:",s)}});const p=g(()=>{const t=(n.value-1)*D;return u.value.slice(t,t+D)}),d=g(()=>Math.ceil(u.value.length/D)),C=g(()=>{const s=[],a=Math.floor((n.value-1)/10)*10+1,i=Math.min(a+10-1,d.value);for(let v=a;v<=i;v++)s.push(v);return s}),h=t=>{t>=1&&t<=d.value&&(n.value=t,window.scrollTo({top:0,behavior:"smooth"}))},_=t=>new Date(t).toLocaleString(),S=t=>{switch(t){case"pending":return"대기 중";case"completed":return"완료";case"rejected":return"거절됨";default:return t}};return(t,s)=>(r(),l("div",z,[p.value.length?(r(),l("table",N,[e("thead",null,[e("tr",null,[e("th",null,o(t.$t("history.platform")),1),e("th",null,o(t.$t("history.platformId")),1),s[2]||(s[2]=e("th",null,"$",-1)),e("th",null,o(t.$t("history.currency")),1),e("th",null,o(t.$t("history.amount")),1),e("th",null,o(t.$t("history.status")),1),e("th",null,o(t.$t("history.requestDate")),1),e("th",null,o(t.$t("history.approveDate")),1)])]),e("tbody",null,[(r(!0),l(b,null,k(p.value,a=>{var i;return r(),l("tr",{key:a.id},[e("td",null,o(P(a.platform_id)),1),e("td",null,o(a.platform_user_id),1),e("td",null,o(a.amount),1),e("td",null,o(a.currency),1),e("td",null,o((i=a.krw_amount)==null?void 0:i.toLocaleString()),1),e("td",null,o(S(a.status)),1),e("td",null,o(_(a.created_at)),1),e("td",null,[a.status==="completed"?(r(),l("span",O,o(_(a.updated_at)),1)):f("",!0)])])}),128))])])):(r(),l("div",j,o(t.$t("history.noRecharge")),1)),d.value>1?(r(),l("div",R,[e("button",{onClick:s[0]||(s[0]=a=>h(n.value-1)),disabled:n.value===1},"<",8,q),(r(!0),l(b,null,k(C.value,a=>(r(),l("button",{key:a,onClick:i=>h(a),class:w({active:n.value===a})},o(a),11,A))),128)),e("button",{onClick:s[1]||(s[1]=a=>h(n.value+1)),disabled:n.value===d.value},">",8,F)])):f("",!0)]))}},W=I(U,[["__scopeId","data-v-b395c603"]]),E={class:"withdraw-history"},G={key:0},J={key:0},K={key:1,style:{"text-align":"center",padding:"2rem",color:"#777"}},Q={key:2,class:"pagination"},X=["disabled"],Y=["onClick"],Z=["disabled"],H=10,x={__name:"WithdrawHistory",setup(M){const u=y([]),n=y(1),c=y([]),m=async()=>{const t=localStorage.getItem("lang")||"ko";try{const s=await $.get(`/platforms?lang=${t}`);c.value=s.data}catch(s){console.error("플랫폼 목록 불러오기 실패:",s)}},P=t=>{const s=c.value.find(a=>a.id===t);return s?s.name:t};B(async()=>{await m();const t=localStorage.getItem("user_token");try{const s=await $.get("/users/me/withdraws",{headers:{Authorization:`Bearer ${t}`}});u.value=s.data.transactions||[]}catch(s){console.error("출금 이력 불러오기 실패:",s)}});const p=g(()=>{const t=(n.value-1)*H;return u.value.slice(t,t+H)}),d=g(()=>Math.ceil(u.value.length/H)),C=g(()=>{const s=[],a=Math.floor((n.value-1)/10)*10+1,i=Math.min(a+10-1,d.value);for(let v=a;v<=i;v++)s.push(v);return s}),h=t=>{t>=1&&t<=d.value&&(n.value=t,window.scrollTo({top:0,behavior:"smooth"}))},_=t=>new Date(t).toLocaleString(),S=t=>{switch(t){case"pending":return"대기 중";case"completed":return"완료";case"rejected":return"거절됨";default:return t}};return(t,s)=>(r(),l("div",E,[p.value.length?(r(),l("table",G,[e("thead",null,[e("tr",null,[e("th",null,o(t.$t("history.platform")),1),e("th",null,o(t.$t("history.platformId")),1),s[2]||(s[2]=e("th",null,"$",-1)),e("th",null,o(t.$t("history.currency")),1),e("th",null,o(t.$t("history.amount")),1),e("th",null,o(t.$t("history.status")),1),e("th",null,o(t.$t("history.requestDate")),1),e("th",null,o(t.$t("history.approveDate")),1)])]),e("tbody",null,[(r(!0),l(b,null,k(p.value,a=>{var i;return r(),l("tr",{key:a.id},[e("td",null,o(P(a.platform_id)),1),e("td",null,o(a.platform_user_id),1),e("td",null,o(a.amount),1),e("td",null,o(a.currency),1),e("td",null,o((i=a.krw_amount)==null?void 0:i.toLocaleString()),1),e("td",null,o(S(a.status)),1),e("td",null,o(_(a.created_at)),1),e("td",null,[a.status==="completed"?(r(),l("span",J,o(_(a.updated_at)),1)):f("",!0)])])}),128))])])):(r(),l("div",K,o(t.$t("histoy.wiHistory")),1)),d.value>1?(r(),l("div",Q,[e("button",{onClick:s[0]||(s[0]=a=>h(n.value-1)),disabled:n.value===1},"<",8,X),(r(!0),l(b,null,k(C.value,a=>(r(),l("button",{key:a,onClick:i=>h(a),class:w({active:n.value===a})},o(a),11,Y))),128)),e("button",{onClick:s[1]||(s[1]=a=>h(n.value+1)),disabled:n.value===d.value},">",8,Z)])):f("",!0)]))}},tt=I(x,[["__scopeId","data-v-8c661d2a"]]),et={class:"history-page"},at={class:"tabs"},st={class:"tab-content"},ot={__name:"History",setup(M){const u=y("recharge");return(n,c)=>(r(),V(T,null,{default:L(()=>[e("div",et,[e("h2",null,"📄 "+o(n.$t("history.title")),1),e("div",at,[e("button",{class:w({active:u.value==="recharge"}),onClick:c[0]||(c[0]=m=>u.value="recharge")},o(n.$t("history.rechargeTab")),3),e("button",{class:w({active:u.value==="withdraw"}),onClick:c[1]||(c[1]=m=>u.value="withdraw")},o(n.$t("history.withdrawTab")),3)]),e("div",st,[u.value==="recharge"?(r(),V(W,{key:0})):(r(),V(tt,{key:1}))])])]),_:1}))}},rt=I(ot,[["__scopeId","data-v-70f22bea"]]);export{rt as default};
