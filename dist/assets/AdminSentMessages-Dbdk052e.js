import{_ as b,a as r,c as y,o as w,b as C,w as S,A as x,d as p,f as d,g as e,i as c,j as A,k as _,v as B,m as $,F as D,l as I,t as n}from"./index-F27yCQw1.js";const V={class:"admin-messages"},j={class:"filter-bar"},F=["onClick"],L=["onClick"],U={key:0,class:"popup"},z={__name:"AdminSentMessages",setup(N){const v=r([]),s=r(null),i=r(""),o=r(""),m=async()=>{const l=localStorage.getItem("admin_token"),t=await p.get("/admin/messages/sent",{headers:{Authorization:`Bearer ${l}`}});v.value=t.data.messages},f=l=>new Date(l).toLocaleString(),h=y(()=>v.value.filter(l=>{const t=l.to_username.includes(i.value),a=o.value===""||o.value==="true"&&l.is_read===1||o.value==="false"&&l.is_read===0;return t&&a})),k=l=>{s.value=l};w(m);const g=async l=>{var a,u;if(!confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;const t=localStorage.getItem("admin_token");try{await p.delete(`/admin/messages/${l}`,{headers:{Authorization:`Bearer ${t}`}}),alert("ì‚­ì œ ì™„ë£Œ!"),m()}catch(M){alert(((u=(a=M.response)==null?void 0:a.data)==null?void 0:u.message)||"ì‚­ì œ ì‹¤íŒ¨")}};return(l,t)=>(d(),C(x,null,{default:S(()=>[e("div",V,[t[5]||(t[5]=e("h2",null,"ðŸ“¬ ë³´ë‚¸ ìª½ì§€ ëª©ë¡",-1)),e("div",j,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),placeholder:"ìˆ˜ì‹ ìž ID ê²€ìƒ‰"},null,512),[[B,i.value]]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a)},t[3]||(t[3]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"false"},"ì½ì§€ ì•ŠìŒ",-1),e("option",{value:"true"},"ì½ìŒ",-1)]),512),[[$,o.value]])]),e("table",null,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",null,"ë°›ëŠ” ì‚¬ìš©ìž"),e("th",null,"ì œëª©"),e("th",null,"ì–¸ì–´"),e("th",null,"ë³´ë‚¸ ë‚ ì§œ"),e("th",null,"ë‚´ìš© ë³´ê¸°"),e("th",null,"ì½ìŒì—¬ë¶€"),e("th",null,"ì‚­ì œ")])],-1)),e("tbody",null,[(d(!0),c(D,null,I(h.value,a=>(d(),c("tr",{key:a.id},[e("td",null,n(a.to_username),1),e("td",null,n(a.subject),1),e("td",null,n(a.language),1),e("td",null,n(f(a.created_at)),1),e("td",null,[e("button",{onClick:u=>k(a)},"ë³´ê¸°",8,F)]),e("td",null,n(a.is_read?"ì½ìŒ":"ì½ì§€ ì•ŠìŒ"),1),e("td",null,[e("button",{onClick:u=>g(a.id)},"ì‚­ì œ",8,L)])]))),128))])]),s.value?(d(),c("div",U,[e("h3",null,n(s.value.subject),1),e("p",null,n(s.value.content),1),e("button",{onClick:t[2]||(t[2]=a=>s.value=null)},"ë‹«ê¸°")])):A("",!0)])]),_:1}))}},T=b(z,[["__scopeId","data-v-c7288daa"]]);export{T as default};
