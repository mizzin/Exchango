import{_ as b,a as r,c as y,o as w,b as C,w as S,A as x,d as p,f as d,g as e,i as c,j as A,k as h,v as B,m as $,F as D,l as I,t as n}from"./index-BUlgKWMI.js";const V={class:"admin-messages"},j={class:"filter-bar"},F=["onClick"],L=["onClick"],U={key:0,class:"popup"},z={__name:"AdminSentMessages",setup(N){const v=r([]),s=r(null),i=r(""),o=r(""),m=async()=>{const a=localStorage.getItem("admin_token"),t=await p.get("http://localhost:3000/admin/messages/sent",{headers:{Authorization:`Bearer ${a}`}});v.value=t.data.messages},_=a=>new Date(a).toLocaleString(),f=y(()=>v.value.filter(a=>{const t=a.to_username.includes(i.value),l=o.value===""||o.value==="true"&&a.is_read===1||o.value==="false"&&a.is_read===0;return t&&l})),k=a=>{s.value=a};w(m);const g=async a=>{var l,u;if(!confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;const t=localStorage.getItem("admin_token");try{await p.delete(`http://localhost:3000/admin/messages/${a}`,{headers:{Authorization:`Bearer ${t}`}}),alert("ì‚­ì œ ì™„ë£Œ!"),m()}catch(M){alert(((u=(l=M.response)==null?void 0:l.data)==null?void 0:u.message)||"ì‚­ì œ ì‹¤íŒ¨")}};return(a,t)=>(d(),C(x,null,{default:S(()=>[e("div",V,[t[5]||(t[5]=e("h2",null,"ðŸ“¬ ë³´ë‚¸ ìª½ì§€ ëª©ë¡",-1)),e("div",j,[h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),placeholder:"ìˆ˜ì‹ ìž ID ê²€ìƒ‰"},null,512),[[B,i.value]]),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.value=l)},t[3]||(t[3]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"false"},"ì½ì§€ ì•ŠìŒ",-1),e("option",{value:"true"},"ì½ìŒ",-1)]),512),[[$,o.value]])]),e("table",null,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",null,"ë°›ëŠ” ì‚¬ìš©ìž"),e("th",null,"ì œëª©"),e("th",null,"ì–¸ì–´"),e("th",null,"ë³´ë‚¸ ë‚ ì§œ"),e("th",null,"ë‚´ìš© ë³´ê¸°"),e("th",null,"ì½ìŒì—¬ë¶€"),e("th",null,"ì‚­ì œ")])],-1)),e("tbody",null,[(d(!0),c(D,null,I(f.value,l=>(d(),c("tr",{key:l.id},[e("td",null,n(l.to_username),1),e("td",null,n(l.subject),1),e("td",null,n(l.language),1),e("td",null,n(_(l.created_at)),1),e("td",null,[e("button",{onClick:u=>k(l)},"ë³´ê¸°",8,F)]),e("td",null,n(l.is_read?"ì½ìŒ":"ì½ì§€ ì•ŠìŒ"),1),e("td",null,[e("button",{onClick:u=>g(l.id)},"ì‚­ì œ",8,L)])]))),128))])]),s.value?(d(),c("div",U,[e("h3",null,n(s.value.subject),1),e("p",null,n(s.value.content),1),e("button",{onClick:t[2]||(t[2]=l=>s.value=null)},"ë‹«ê¸°")])):A("",!0)])]),_:1}))}},T=b(z,[["__scopeId","data-v-83d0536c"]]);export{T as default};
