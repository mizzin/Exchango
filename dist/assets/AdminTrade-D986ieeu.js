import{_ as V,a as b,o as j,p as y,b as x,w as A,A as B,f as c,g as t,k as i,v as Y,m as g,s as P,z as v,i as p,F as T,l as U,t as s,j as z}from"./index-BT3itL6u.js";import{d as I}from"./dayjs.min-Cbbdfn5l.js";const F={class:"admin-trade"},L={class:"filter-bar-row"},N={class:"filter-bar-row date-filter-row"},R={class:"date-filter"},H={class:"currency-pill"},K={key:0},W={key:1},E={key:0},q=["onClick"],G=["onClick"],J={class:"pagination"},O=["disabled"],Q=["disabled"],X={__name:"AdminTrade",setup(Z){const k=b([]),o=b(1),m=b(1),n=b({username:"",status:"",currency:"",dateShortcut:"",startDate:"",endDate:""}),D=l=>{const e=I();switch(n.value.dateShortcut=l,l){case"today":n.value.startDate=e.format("YYYY-MM-DD"),n.value.endDate=e.format("YYYY-MM-DD");break;case"1w":n.value.startDate=e.subtract(7,"day").format("YYYY-MM-DD"),n.value.endDate=e.format("YYYY-MM-DD");break;case"1m":n.value.startDate=e.subtract(1,"month").format("YYYY-MM-DD"),n.value.endDate=e.format("YYYY-MM-DD");break;case"3m":n.value.startDate=e.subtract(3,"month").format("YYYY-MM-DD"),n.value.endDate=e.format("YYYY-MM-DD");break}};j(async()=>{await r()});const r=async()=>{const l=localStorage.getItem("admin_token"),{username:e,status:a,currency:u}=n.value;try{const d=await y.get("/admin/trade/recharge",{headers:{Authorization:`Bearer ${l}`},params:{page:o.value,username:n.value.username,status:n.value.status,currency:n.value.currency,startDate:n.value.startDate,endDate:n.value.endDate}});k.value=d.data.rows||[],m.value=Math.ceil(d.data.total/10)||1}catch(d){console.error("‚ùå Ï∂©Ï†Ñ ÎÇ¥Ïó≠ Î°úÎî© Ïã§Ìå®:",d)}},h=()=>{o.value=1,r()},w=()=>{n.value={username:"",status:"",currency:"",dateShortcut:"",startDate:"",endDate:""},o.value=1,r()},M=()=>{o.value>1&&(o.value--,r())},_=()=>{o.value<m.value&&(o.value++,r())},S=async l=>{var a;const e=localStorage.getItem("admin_token");try{await y.patch(`/admin/trade/recharge/${l}/approve`,{},{headers:{Authorization:`Bearer ${e}`}}),await r(),alert("ÏäπÏù∏ Ï≤òÎ¶¨ ÏôÑÎ£å")}catch(u){console.error("‚ùå ÏäπÏù∏ Ïã§Ìå®:",((a=u.response)==null?void 0:a.data)||u),alert("ÏäπÏù∏ Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò Î∞úÏÉù")}},C=async l=>{const e=localStorage.getItem("admin_token");try{await y.patch(`/admin/trade/recharge/${l}/reject`,{},{headers:{Authorization:`Bearer ${e}`}}),await r(),alert("Í±∞Ï†à Ï≤òÎ¶¨ ÏôÑÎ£å")}catch(a){console.error("‚ùå Í±∞Ï†à Ïã§Ìå®:",a),alert("Í±∞Ï†à Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò Î∞úÏÉù")}},$=l=>{switch(l){case"pending":return"ÎåÄÍ∏∞ Ï§ë";case"completed":return"ÏôÑÎ£å";case"cancelled":return"Ï∑®ÏÜåÎê®";case"rejected":return"Í±∞Ï†àÎê®";default:return l}},f=l=>new Date(l).toLocaleString();return(l,e)=>(c(),x(B,null,{default:A(()=>[t("div",F,[e[14]||(e[14]=t("h2",null,"üîã Ï∂©Ï†Ñ Ïã†Ï≤≠ ÎÇ¥Ïó≠",-1)),t("div",L,[i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.username=a),placeholder:"ÏÇ¨Ïö©ÏûêÎ™Ö Í≤ÄÏÉâ"},null,512),[[Y,n.value.username]]),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.status=a)},e[9]||(e[9]=[t("option",{value:""},"Ï†ÑÏ≤¥ ÏÉÅÌÉú",-1),t("option",{value:"pending"},"ÎåÄÍ∏∞Ï§ë",-1),t("option",{value:"completed"},"ÏäπÏù∏",-1),t("option",{value:"rejected"},"Í±∞Ï†à",-1)]),512),[[g,n.value.status]]),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.currency=a)},e[10]||(e[10]=[t("option",{value:""},"Ï†ÑÏ≤¥ ÌÜµÌôî",-1),t("option",{value:"KRW"},"‚Ç© KRW",-1),t("option",{value:"PHP"},"‚Ç± PHP",-1),t("option",{value:"USDT"},"‚ÇÆ USDT",-1)]),512),[[g,n.value.currency]])]),t("div",N,[t("div",R,[e[11]||(e[11]=P("ÏöîÏ≤≠Ïùº ")),t("button",{class:v(["date-btn",{active:n.value.dateShortcut==="today"}]),onClick:e[3]||(e[3]=a=>D("today"))},"Ïò§Îäò",2),t("button",{class:v(["date-btn",{active:n.value.dateShortcut==="1w"}]),onClick:e[4]||(e[4]=a=>D("1w"))},"1Ï£ºÏùº",2),t("button",{class:v(["date-btn",{active:n.value.dateShortcut==="1m"}]),onClick:e[5]||(e[5]=a=>D("1m"))},"1Í∞úÏõî",2),t("button",{class:v(["date-btn",{active:n.value.dateShortcut==="3m"}]),onClick:e[6]||(e[6]=a=>D("3m"))},"3Í∞úÏõî",2),i(t("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=a=>n.value.startDate=a)},null,512),[[Y,n.value.startDate]]),e[12]||(e[12]=t("span",null,"~",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=a=>n.value.endDate=a)},null,512),[[Y,n.value.endDate]])]),t("div",{class:"button-group"},[t("button",{class:"search-button",onClick:h},"Í≤ÄÏÉâ"),t("button",{class:"reset-button",onClick:w},"Ï¥àÍ∏∞Ìôî")])]),t("table",null,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"ÏÇ¨Ïö©Ïûê"),t("th",null,"ÌîåÎû´Ìèº"),t("th",null,"ÌîåÎû´Ìèº ID"),t("th",null,"$"),t("th",null,"ÌÜµÌôî"),t("th",null,"Í∏àÏï°"),t("th",null,"ÏÉÅÌÉú"),t("th",null,"ÏöîÏ≤≠Ïùº"),t("th",null,"ÏäπÏù∏ÏùºÏãú"),t("th",null,"Ï≤òÎ¶¨")])],-1)),t("tbody",null,[(c(!0),p(T,null,U(k.value,a=>{var u;return c(),p("tr",{key:a.id},[t("td",null,s(a.username),1),t("td",null,s(a.platform_id),1),t("td",null,s(a.platform_user_id),1),t("td",null,s(a.amount),1),t("td",null,[t("span",H,s(a.currency),1)]),t("td",null,s((u=a.krw_amount)==null?void 0:u.toLocaleString()),1),t("td",null,[t("span",{class:v(["badge",a.status])},s($(a.status)),3)]),t("td",null,s(f(a.created_at)),1),a.status==="completed"?(c(),p("td",K,s(f(a.updated_at)),1)):(c(),p("td",W,"-")),t("td",null,[a.status==="pending"?(c(),p("div",E,[t("button",{class:"btn-approve",onClick:d=>S(a.id)},"ÏäπÏù∏",8,q),t("button",{class:"btn-reject",onClick:d=>C(a.id)},"Í±∞Ï†à",8,G)])):z("",!0)])])}),128))])]),t("div",J,[t("button",{onClick:M,disabled:o.value===1},"Ïù¥Ï†Ñ",8,O),t("span",null,s(o.value)+" / "+s(m.value),1),t("button",{onClick:_,disabled:o.value===m.value},"Îã§Ïùå",8,Q)])])]),_:1}))}},at=V(X,[["__scopeId","data-v-ad19a1b8"]]);export{at as default};
