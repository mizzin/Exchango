import{C as w,D as P,E as x,a as C,o as j,G as K,H as R,I as z,J as D,K as A,_ as T,A as F,b as G,w as H,q as V,p as q,e as J,f as W,g as f,k as _,x as Q,v as X,m as Y}from"./index-BUlgKWMI.js";var Z=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],$=function(n){return Z.map(function(e){return e.toLowerCase()}).indexOf(n.toLowerCase())!==-1},nn=function(n,e,t){Object.keys(e).filter($).forEach(function(o){var a=e[o];typeof a=="function"&&(o==="onInit"?a(n,t):t.on(o.substring(2),function(r){return a(r,t)}))})},en=function(n,e,t,o){var a=n.modelEvents?n.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;w(o,function(l,u){t&&typeof l=="string"&&l!==u&&l!==t.getContent({format:n.outputFormat})&&t.setContent(l)}),t.on(r||"change input undo redo",function(){e.emit("update:modelValue",t.getContent({format:n.outputFormat}))})},tn=function(n,e,t,o,a,r){o.setContent(r()),t.attrs["onUpdate:modelValue"]&&en(e,t,o,a),nn(n,t.attrs,o)},I=0,M=function(n){var e=Date.now(),t=Math.floor(Math.random()*1e9);return I++,n+"_"+t+I+String(e)},on=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},k=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},an=function(n,e){return k(n).concat(k(e))},rn=function(n){return n==null},B=function(){return{listeners:[],scriptId:M("tiny-script"),scriptLoaded:!1}},ln=function(){var n=B(),e=function(a,r,l,u){var i=r.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=a,i.src=l;var g=function(){i.removeEventListener("load",g),u()};i.addEventListener("load",g),r.head&&r.head.appendChild(i)},t=function(a,r,l){n.scriptLoaded?l():(n.listeners.push(l),a.getElementById(n.scriptId)||e(n.scriptId,a,r,function(){n.listeners.forEach(function(u){return u()}),n.scriptLoaded=!0}))},o=function(){n=B()};return{load:t,reinitialize:o}},un=ln(),dn=function(){return typeof window<"u"?window:global},v=function(){var n=dn();return n&&n.tinymce?n.tinymce:null},sn={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},c=function(){return c=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},c.apply(this,arguments)},cn=function(n,e,t,o){return n(o||"div",{id:e,ref:t})},fn=function(n,e,t){return n("textarea",{id:e,visibility:"hidden",ref:t})},E={selector:void 0,target:void 0},vn=P({props:sn,setup:function(n,e){var t=n.init?c(c({},n.init),E):c({},E),o=x(n),a=o.disabled,r=o.modelValue,l=o.tagName,u=C(null),i=null,g=n.id||M("tiny-vue"),b=n.init&&n.init.inline||n.inline,S=!!e.attrs["onUpdate:modelValue"],h=!0,L=n.initialValue?n.initialValue:"",p="",U=function(d){return S?function(){return r!=null&&r.value?r.value:""}:function(){return d?L:p}},y=function(){var d=U(h),s=c(c({},t),{readonly:n.disabled,target:u.value,plugins:an(t.plugins,n.plugins),toolbar:n.toolbar||t.toolbar,inline:b,license_key:n.licenseKey,setup:function(m){i=m,m.on("init",function(O){return tn(O,n,e,m,r,d)}),typeof t.setup=="function"&&t.setup(m)}});on(u.value)&&(u.value.style.visibility=""),v().init(s),h=!1};w(a,function(d){var s;i!==null&&(typeof((s=i.mode)===null||s===void 0?void 0:s.set)=="function"?i.mode.set(d?"readonly":"design"):i.setMode(d?"readonly":"design"))}),w(l,function(d){var s;S||(p=i.getContent()),(s=v())===null||s===void 0||s.remove(i),A(function(){return y()})}),j(function(){if(v()!==null)y();else if(u.value&&u.value.ownerDocument){var d=n.cloudChannel?n.cloudChannel:"7",s=n.apiKey?n.apiKey:"no-api-key",m=rn(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(d,"/tinymce.min.js"):n.tinymceScriptSrc;un.load(u.value.ownerDocument,m,y)}}),K(function(){v()!==null&&v().remove(i)}),b||(R(function(){h||y()}),z(function(){var d;S||(p=i.getContent()),(d=v())===null||d===void 0||d.remove(i)}));var N=function(d){var s;p=i.getContent(),(s=v())===null||s===void 0||s.remove(i),t=c(c(c({},t),d),E),A(function(){return y()})};return e.expose({rerender:N,getEditor:function(){return i}}),function(){return b?cn(D,g,u,n.tagName):fn(D,g,u)}}});const mn={components:{AdminLayout:F,Editor:vn},setup(){const n=C(""),e=C(""),t=C("en"),o={apiKey:"bah07anacayip8yl43fpoon7252ths79pwcu1sp2uvkn2i70",height:400,menubar:!1,plugins:"link image code lists",toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright | bullist numlist outdent indent | image link | code",branding:!1},a=J();return{title:n,editorData:e,language:t,editorConfig:o,submitNotice:async()=>{if(!n.value.trim())return alert("제목을 입력해주세요.");if(!e.value.trim())return alert("내용을 입력해주세요.");try{const l=localStorage.getItem("admin_token");await q.post("/admin/notices",{title:n.value,content:e.value,language:t.value},{headers:{Authorization:`Bearer ${l}`}}),alert("공지사항이 등록되었습니다."),a.push("/admin/notice")}catch(l){console.error("❌ 공지 등록 실패:",l),alert("등록 중 오류가 발생했습니다.")}}}}},gn={class:"admin-notice-form"};function yn(n,e,t,o,a,r){const l=V("Editor"),u=V("AdminLayout");return W(),G(u,null,{default:H(()=>[f("div",gn,[e[5]||(e[5]=f("h2",null,"Create Notice",-1)),_(f("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.title=i),type:"text",class:"notice-input",placeholder:"Title"},null,512),[[X,o.title]]),_(f("select",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.language=i),class:"notice-input"},e[4]||(e[4]=[f("option",{value:"en"},"English",-1),f("option",{value:"ko"},"Korean",-1),f("option",{value:"ja"},"Japanese",-1),f("option",{value:"zh"},"Chinese",-1)]),512),[[Y,o.language]]),Q(l,{"api-key":"bah07anacayip8yl43fpoon7252ths79pwcu1sp2uvkn2i70",modelValue:o.editorData,"onUpdate:modelValue":e[2]||(e[2]=i=>o.editorData=i),init:o.editorConfig},null,8,["modelValue","init"]),f("button",{class:"submit-btn",onClick:e[3]||(e[3]=(...i)=>o.submitNotice&&o.submitNotice(...i))},"Submit")])]),_:1})}const Cn=T(mn,[["render",yn],["__scopeId","data-v-e597629f"]]);export{Cn as default};
